"use client";

import React, { forwardRef, useRef } from "react";
import BeamEffect from "./beam-effect";
import Ripple from "../ripple/ripple";

export default function AnimatedBeam() {
  const containerRef = useRef(null);
  const div1Ref = useRef(null);
  const div2Ref = useRef(null);
  const div3Ref = useRef(null);
  const div4Ref = useRef(null);
  const div5Ref = useRef(null);
  const div6Ref = useRef(null);
  const div7Ref = useRef(null);

  return (
    <div
      className="relative flex h-[340px] w-full items-start justify-center overflow-hidden rounded-lg bg-transparent"
      ref={containerRef}
    >
      <div className="flex size-full flex-col max-w-[1000px] max-h-[200px] items-stretch justify-between gap-[58px]">
        <div className="flex flex-row items-center justify-between">
          <Circle ref={div1Ref}>
            <Icons.next />
          </Circle>

          <Circle ref={div5Ref}>
            <Icons.figma />
          </Circle>
        </div>
        <div className="flex flex-row items-center justify-between">
          <Circle ref={div2Ref} className={'z-20'}>
            <Icons.react />
          </Circle>

          <Circle ref={div4Ref}>
            <Ripple>
              <Icons.TP />
            </Ripple>

          </Circle>
          <Circle ref={div6Ref}>
            <Icons.rive />
          </Circle>
        </div>
        <div className="flex flex-row items-center justify-between">
          <Circle ref={div3Ref}>
            <Icons.tailwind />
          </Circle>
          
          <Circle ref={div7Ref}>
            <Icons.nodeJs />
          </Circle>
        </div>
      </div>

      <BeamEffect
        containerRef={containerRef}
        fromRef={div1Ref}
        toRef={div4Ref}
        curvature={-130} //-175
        endYOffset={-10} //-10
      />
      <BeamEffect
        containerRef={containerRef}
        fromRef={div2Ref}
        toRef={div4Ref}
      />
      <BeamEffect
        containerRef={containerRef}
        fromRef={div3Ref}
        toRef={div4Ref}
        curvature={130} //175
        endYOffset={10} //10
      />
      <BeamEffect
        containerRef={containerRef}
        fromRef={div5Ref}
        toRef={div4Ref}
        curvature={-130} //-
        endYOffset={-10} //-
        reverse
      />
      <BeamEffect
        containerRef={containerRef}
        fromRef={div6Ref}
        toRef={div4Ref}
        reverse
      />
      <BeamEffect
        containerRef={containerRef}
        fromRef={div7Ref}
        toRef={div4Ref}
        curvature={130}
        endYOffset={10}
        reverse
      />
    </div>
  );
}

const Circle = forwardRef(function Circle({ className, children }, ref) {
  return (
    <div
      ref={ref}
      className={`z-10 flex size-[75px] md:size-28 items-center justify-center rounded-full border-2 bg-white p-[12px] shadow-[0_0_20px_-12px_rgba(0,0,0,0.8)] ${className}`}
    >
      {children}
    </div>
  );
});

const Icons = {
  figma: () => (
    <svg width="50" height="50" viewBox="0 0 50 50" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M18.0555 45.8332C21.8889 45.8332 25 42.7221 25 38.8888V31.9443H18.0555C14.2222 31.9443 11.1111 35.0554 11.1111 38.8888C11.1111 42.7221 14.2222 45.8332 18.0555 45.8332Z" fill="#0ACF83"/>
      <path d="M11.1111 25.0001C11.1111 21.1668 14.2222 18.0557 18.0555 18.0557H25V31.9446H18.0555C14.2222 31.9446 11.1111 28.8334 11.1111 25.0001Z" fill="#A259FF"/>
      <path d="M11.1111 11.1109C11.1111 7.27761 14.2222 4.1665 18.0555 4.1665H25V18.0554H18.0555C14.2222 18.0554 11.1111 14.9443 11.1111 11.1109Z" fill="#F24E1E"/>
      <path d="M25 4.1665H31.9444C35.7778 4.1665 38.8889 7.27761 38.8889 11.1109C38.8889 14.9443 35.7778 18.0554 31.9444 18.0554H25V4.1665Z" fill="#FF7262"/>
      <path d="M38.8889 25.0001C38.8889 28.8334 35.7778 31.9446 31.9444 31.9446C28.1111 31.9446 25 28.8334 25 25.0001C25 21.1668 28.1111 18.0557 31.9444 18.0557C35.7778 18.0557 38.8889 21.1668 38.8889 25.0001Z" fill="#1ABCFE"/>
    </svg>

  ),
  TP: () => (
    <div
    style={{ WebkitTextStroke: '3px black'}}
    className="text-[38px] font-extrabold leading-[40px] text-[#F2CD88]">
      TP
    </div>
  ),
  tailwind: () => (
    <svg 
      width="100" 
      height="100" 
      viewBox="0 0 107 107" 
      fill="none" 
      xmlns="http://www.w3.org/2000/svg"
      >
      <path d="M82.4792 42.3986C79.1357 41.2471 76.1844 39.1765 73.9638 36.4245C71.5164 33.3582 68.4001 30.8923 64.8532 29.2154C61.3064 27.5386 57.423 26.6952 53.5001 26.7499C48.223 26.3762 42.9988 28.0038 38.8679 31.3085C34.7369 34.6133 32.0022 39.3528 31.2084 44.5832C32.7718 41.9673 35.1249 39.9147 37.9289 38.721C40.7329 37.5273 43.8433 37.254 46.8126 37.9403C50.1505 39.1254 53.097 41.2079 55.328 43.959C57.7888 47.0008 60.9111 49.4412 64.4572 51.0946C68.0033 52.7479 71.8798 53.5705 75.7917 53.4999C81.0688 53.8736 86.293 52.246 90.424 48.9412C94.555 45.6364 97.2896 40.8969 98.0834 35.6665C96.5484 38.3138 94.2028 40.3973 91.3931 41.6095C88.5833 42.8217 85.4583 43.0984 82.4792 42.3986ZM24.5209 64.6011C27.8644 65.7527 30.8157 67.8232 33.0363 70.5753C35.4837 73.6416 38.6001 76.1075 42.1469 77.7843C45.6938 79.4611 49.5772 80.3045 53.5001 80.2499C58.7771 80.6236 64.0013 78.996 68.1323 75.6912C72.2633 72.3864 74.998 67.6469 75.7917 62.4165C74.2283 65.0325 71.8753 67.085 69.0713 68.2787C66.2673 69.4724 63.1568 69.7458 60.1876 69.0595C56.8497 67.8744 53.9032 65.7918 51.6722 63.0407C49.2047 60.0064 46.0812 57.5714 42.5366 55.9188C38.9921 54.2662 35.1188 53.4391 31.2084 53.4999C25.9314 53.1262 20.7072 54.7538 16.5762 58.0585C12.4452 61.3633 9.71052 66.1028 8.91675 71.3332C10.4518 68.686 12.7973 66.6024 15.6071 65.3902C18.4168 64.178 21.5419 63.9014 24.5209 64.6011Z" fill="#38BDF8"/>
    </svg>
  ),
  framer: () => (
    <svg 
      width="100" 
      height="100" 
      viewBox="0 0 100 100" 
      fill="none" 
      xmlns="http://www.w3.org/2000/svg"
      > 
      <path d="M16.6667 0H83.3334V33.3333H50.0001L16.6667 0ZM16.6667 33.3333H50.0001L83.3334 66.6667H16.6667V33.3333ZM16.6667 66.6667H50.0001V100L16.6667 66.6667Z" fill="black"/>
    </svg>
  ),

  next: () => (
    <svg 
      width="100" 
      height="100" 
      viewBox="0 0 24 24" 
      fill="none" 
      xmlns="http://www.w3.org/2000/svg"
      >
      <g clipPath="url(#clip0_1046_155)">
        <mask id="mask0_1046_155"  maskUnits="userSpaceOnUse" x="0" y="0" width="24" height="24">
          <path d="M24 0H0V24H24V0Z" fill="white"/>
        </mask>
        <g mask="url(#mask0_1046_155)">
          <path d="M11.2141 0.00645943C11.1625 0.0111515 10.9982 0.0275738 10.8504 0.039304C7.44164 0.346635 4.24868 2.18593 2.22639 5.01291C1.10029 6.58476 0.380059 8.36775 0.107918 10.2563C0.0117302 10.9156 0 11.1103 0 12.0041C0 12.898 0.0117302 13.0927 0.107918 13.7519C0.760117 18.2587 3.96716 22.0452 8.31672 23.4481C9.0956 23.6991 9.91672 23.8704 10.8504 23.9736C11.2141 24.0135 12.7859 24.0135 13.1496 23.9736C14.7613 23.7953 16.1267 23.3965 17.4733 22.7091C17.6798 22.6035 17.7196 22.5754 17.6915 22.5519C17.6727 22.5378 16.793 21.3578 15.7372 19.9314L13.8182 17.339L11.4135 13.7801C10.0903 11.8235 9.00176 10.2235 8.99238 10.2235C8.98299 10.2211 8.97361 11.8024 8.96891 13.7331C8.96188 17.1138 8.95953 17.2499 8.9173 17.3296C8.85631 17.4446 8.80938 17.4915 8.71085 17.5431C8.63578 17.5807 8.57009 17.5877 8.21584 17.5877H7.80997L7.70205 17.5197C7.63167 17.4751 7.58006 17.4164 7.54487 17.3484L7.4956 17.2428L7.50029 12.539L7.50733 7.83285L7.58006 7.74136C7.6176 7.69209 7.69736 7.62875 7.75367 7.59825C7.84985 7.55133 7.88739 7.54664 8.29325 7.54664C8.77185 7.54664 8.85161 7.5654 8.97595 7.70147C9.01114 7.73901 10.3132 9.7003 11.871 12.0628C13.4287 14.4252 15.5589 17.651 16.6053 19.2346L18.5056 22.1132L18.6018 22.0499C19.4534 21.4962 20.3543 20.7079 21.0674 19.8868C22.5853 18.1437 23.5636 16.0182 23.8921 13.7519C23.9883 13.0927 24 12.898 24 12.0041C24 11.1103 23.9883 10.9156 23.8921 10.2563C23.2399 5.74957 20.0328 1.96306 15.6833 0.560125C14.9161 0.311445 14.0997 0.140184 13.1848 0.036958C12.9595 0.0134976 11.4088 -0.0123089 11.2141 0.00645943ZM16.1267 7.26511C16.2393 7.32142 16.3308 7.42933 16.3636 7.54194C16.3824 7.60294 16.3871 8.90734 16.3824 11.8469L16.3754 16.0651L15.6317 14.9249L14.8856 13.7848V10.7185C14.8856 8.73608 14.895 7.62171 14.9091 7.56775C14.9466 7.43637 15.0287 7.33315 15.1413 7.27215C15.2375 7.22288 15.2727 7.21819 15.6411 7.21819C15.9883 7.21819 16.0493 7.22288 16.1267 7.26511Z" fill="black"/>
        </g>
      </g>
      <defs>
        <clipPath id="clip0_1046_155">
          <rect width="24" height="24" fill="white"/>
        </clipPath>
      </defs>
    </svg>
  ),
  react: () => (
    <svg 
      width="100" 
      height="100" 
      viewBox="0 0 100 100" 
      fill="none" 
      xmlns="http://www.w3.org/2000/svg"
      >
      <path d="M49.9167 58.3002C54.5375 58.3002 58.2834 54.5543 58.2834 49.9336C58.2834 45.3128 54.5375 41.5669 49.9167 41.5669C45.2959 41.5669 41.55 45.3128 41.55 49.9336C41.55 54.5543 45.2959 58.3002 49.9167 58.3002Z" fill="#00D8FF"/>
      <path d="M49.9166 69.0998C38.1666 69.0998 27.8999 67.7164 20.2166 65.0831C15.2333 63.3831 10.9999 61.1164 7.98325 58.5331C4.78325 55.7998 3.08325 52.8164 3.08325 49.9331C3.08325 44.3998 9.14992 38.9831 19.3333 35.4498C27.6666 32.5498 38.5333 30.9331 49.8999 30.9331C61.0666 30.9331 71.7833 32.4998 80.0666 35.3664C84.9166 37.0331 88.9999 39.1998 91.8999 41.5998C95.0499 44.2331 96.7166 47.1164 96.7166 49.9331C96.7166 55.6831 89.9333 61.4998 78.9999 65.1164C71.2666 67.6831 60.9333 69.0998 49.9166 69.0998ZM49.9166 34.9331C39.1333 34.9331 28.4666 36.4998 20.6666 39.2164C11.2999 42.4831 7.09992 46.9498 7.09992 49.9331C7.09992 53.0331 11.6166 57.9164 21.5166 61.2998C28.7833 63.7831 38.6166 65.0998 49.9166 65.0998C60.5166 65.0998 70.3999 63.7664 77.7499 61.3164C88.0333 57.8998 92.7333 53.0164 92.7333 49.9331C92.7333 48.3498 91.5333 46.4831 89.3499 44.6664C86.8333 42.5664 83.1666 40.6498 78.7833 39.1331C70.8999 36.4331 60.6499 34.9331 49.9166 34.9331Z" fill="#00D8FF"/>
      <path d="M30.9332 91.6332C29.2332 91.6332 27.7332 91.2666 26.4666 90.5333C21.6832 87.7666 20.0166 79.7999 22.0332 69.2166C23.6832 60.5332 27.7166 50.3332 33.3999 40.4832C38.9832 30.8166 45.6832 22.3166 52.2999 16.5666C56.1666 13.1999 60.0832 10.7332 63.6166 9.43324C67.4666 8.01658 70.7999 8.01658 73.2332 9.41658C78.2166 12.2832 79.8666 21.0832 77.5332 32.3499C75.8832 40.3499 71.9499 49.9999 66.4499 59.5499C60.5832 69.7166 54.2499 77.9166 48.1332 83.2666C44.1666 86.7333 40.0832 89.2666 36.3499 90.5832C34.3999 91.2832 32.5666 91.6332 30.9332 91.6332ZM35.1166 41.4832L36.8499 42.4832C31.4666 51.8166 27.4832 61.8332 25.9499 69.9666C24.0999 79.7166 25.8832 85.5833 28.4499 87.0666C29.0832 87.4333 29.9166 87.6332 30.9332 87.6332C34.2499 87.6332 39.4666 85.5333 45.4999 80.2666C51.2832 75.2166 57.3332 67.3499 62.9832 57.5666C68.2832 48.3832 72.0499 39.1499 73.6166 31.5666C75.7999 20.9499 73.9166 14.4499 71.2332 12.8999C69.8666 12.1166 67.6499 12.2166 64.9832 13.1999C61.8999 14.3332 58.4166 16.5499 54.9166 19.5999C48.6332 25.0666 42.2166 33.1999 36.8499 42.4999L35.1166 41.4832Z" fill="#00D8FF"/>
      <path d="M68.8999 91.6832C64.3665 91.6832 58.6165 88.9499 52.6165 83.7832C45.9165 78.0165 39.0999 69.4332 33.3999 59.5832C27.7999 49.9165 23.7999 39.8665 22.1165 31.2499C21.1332 26.2165 20.9499 21.5999 21.5832 17.8832C22.2832 13.8332 23.9332 10.9499 26.3832 9.5332C31.3499 6.64987 39.7999 9.61654 48.3999 17.2665C54.4999 22.6832 60.8999 30.9165 66.4165 40.4499C72.2999 50.6165 76.2499 60.1999 77.8165 68.1665C78.8332 73.3332 78.9999 78.1332 78.2832 82.0332C77.5165 86.1832 75.7832 89.1332 73.2832 90.5832C72.0332 91.3165 70.5499 91.6832 68.8999 91.6832ZM36.8665 57.5832C42.2665 66.9165 48.9665 75.3665 55.2332 80.7499C62.7499 87.2165 68.7165 88.6165 71.2999 87.1165C73.9832 85.5665 75.9499 79.2165 73.9165 68.9499C72.4165 61.4165 68.6332 52.2499 62.9665 42.4665C57.6499 33.2832 51.5332 25.3999 45.7499 20.2665C37.6499 13.0665 31.0832 11.4499 28.3999 12.9999C27.0332 13.7832 26.0165 15.7665 25.5332 18.5665C24.9832 21.7999 25.1499 25.9332 26.0499 30.4832C27.6499 38.6665 31.4832 48.2832 36.8665 57.5832Z" fill="#00D8FF"/>
    </svg>
  ),
  github: () => (
    <svg 
      width="100" 
      height="100" 
      viewBox="0 0 100 100" 
      fill="none" 
      xmlns="http://www.w3.org/2000/svg"
      >
      <path fillRule="evenodd" clipRule="evenodd" d="M50 6.25C25.8398 6.25 6.25 26.3281 6.25 51.1133C6.25 70.9375 18.7891 87.7344 36.1719 93.6719C38.3594 94.082 39.1602 92.6953 39.1602 91.5039C39.1602 90.4297 39.1211 87.6172 39.1016 83.8672C26.9336 86.582 24.3555 77.8516 24.3555 77.8516C22.3633 72.6758 19.4922 71.2891 19.4922 71.2891C15.5273 68.4961 19.7852 68.5547 19.7852 68.5547C24.1797 68.8672 26.4844 73.1836 26.4844 73.1836C30.3906 80.0391 36.7188 78.0664 39.2188 76.9141C39.6094 74.0234 40.7422 72.0313 41.9922 70.918C32.2852 69.7852 22.0703 65.9375 22.0703 48.75C22.0703 43.8477 23.7695 39.8438 26.5625 36.7188C26.1133 35.5859 24.6094 31.0156 26.9922 24.8438C26.9922 24.8438 30.6641 23.6328 39.0234 29.4336C42.5195 28.4375 46.25 27.9492 49.9805 27.9297C53.6914 27.9492 57.4414 28.4375 60.9375 29.4336C69.2969 23.6328 72.9492 24.8438 72.9492 24.8438C75.332 31.0156 73.8281 35.5859 73.3789 36.7188C76.1719 39.8633 77.8711 43.8672 77.8711 48.75C77.8711 65.9766 67.6367 69.7656 57.8906 70.8789C59.4531 72.2656 60.8594 75 60.8594 79.1797C60.8594 85.1758 60.8008 90.0195 60.8008 91.4844C60.8008 92.6758 61.582 94.082 63.8086 93.6328C81.2305 87.7148 93.75 70.918 93.75 51.1133C93.75 26.3281 74.1602 6.25 50 6.25Z" fill="black"/>
    </svg>
  ),
  rive: () => (
    <svg width="50" height="50" viewBox="0 0 50 50" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M25 43.75V18.75H12.5V31.25L25 43.75Z" fill="black" fill-opacity="0.5"/>
<path d="M37.5 18.75V6.25H12.5L25 18.75H12.5V31.25H37.5L25 18.75H37.5Z" fill="black"/>
</svg>

  ),

  nodeJs: () => (
    <svg width="50" height="50" viewBox="0 0 50 50" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M41.9688 12.7023L26.7901 3.59879C26.2449 3.28797 25.6281 3.12451 25.0005 3.12451C24.373 3.12451 23.7562 3.28797 23.211 3.59879L8.0313 12.7013C7.48427 13.0366 7.03294 13.5072 6.72091 14.0678C6.40888 14.6284 6.24671 15.26 6.25005 15.9015V34.0822C6.24677 34.7241 6.40895 35.3561 6.72094 35.9172C7.03294 36.4782 7.48423 36.9494 8.0313 37.2853L12.0118 39.6623L12.0342 39.675C14.044 40.7033 14.8135 40.7033 15.7051 40.7033C18.8438 40.7033 20.794 38.672 20.794 35.4015V17.7736C20.7958 17.5535 20.7103 17.3417 20.5561 17.1846C20.402 17.0275 20.1918 16.938 19.9717 16.9357H17.7862C17.5661 16.938 17.3559 17.0275 17.2018 17.1846C17.0476 17.3417 16.9621 17.5535 16.9639 17.7736V35.4015C16.9719 35.6539 16.9145 35.904 16.7973 36.1277C16.68 36.3513 16.507 36.5408 16.295 36.6779C15.7188 37.0295 14.8819 36.9552 13.9376 36.4679L10.1231 34.172C10.1085 34.1621 10.0966 34.1487 10.0884 34.133C10.0802 34.1173 10.076 34.0999 10.0762 34.0822V16.1584C10.0768 16.1378 10.0824 16.1176 10.0924 16.0996C10.1025 16.0816 10.1167 16.0662 10.1338 16.0548L24.962 6.97282C24.973 6.96731 24.9852 6.96445 24.9976 6.96445C25.01 6.96445 25.0222 6.96731 25.0333 6.97282L39.8702 16.0548C39.887 16.0672 39.9007 16.0833 39.9101 16.102C39.9194 16.1207 39.9242 16.1414 39.9239 16.1623V34.0822C39.9242 34.1007 39.9205 34.1191 39.9129 34.136C39.9053 34.1529 39.894 34.1678 39.8799 34.1798L25.0303 43.0324C25.005 43.0412 24.9775 43.0412 24.9522 43.0324L21.1602 40.7804C21.0476 40.7069 20.9176 40.6644 20.7833 40.6574C20.649 40.6503 20.5152 40.679 20.3956 40.7404L20.3624 40.7599C19.3155 41.38 19.0342 41.5412 18.0635 41.8947C17.9053 41.9523 17.5333 42.09 17.501 42.4582C17.4688 42.8263 17.8223 43.0881 18.1368 43.2707L23.2051 46.383C23.7452 46.7065 24.3627 46.8776 24.9922 46.8781H25.0489C25.6626 46.8685 26.2631 46.6977 26.7901 46.383L41.9688 37.2882C42.5156 36.9513 42.9666 36.4795 43.2785 35.9181C43.5904 35.3566 43.7528 34.7244 43.75 34.0822V15.9015C43.7531 15.2601 43.5908 14.6288 43.2788 14.0684C42.9668 13.508 42.5156 13.0375 41.9688 12.7023Z" fill="#41883F"/>
<path d="M30.0664 31.0596C26.4248 31.0596 25.6484 30.042 25.418 28.3994C25.392 28.2038 25.2967 28.0241 25.1494 27.8929C25.002 27.7617 24.8125 27.6878 24.6152 27.6846H22.6816C22.4637 27.6892 22.2565 27.7799 22.1053 27.937C21.9541 28.094 21.8713 28.3045 21.875 28.5225C21.875 29.9463 22.375 34.5938 30.0703 34.5938C32.4512 34.5938 34.4316 34.0371 35.7959 32.9834C37.1601 31.9297 37.8906 30.3965 37.8906 28.5693C37.8906 24.9023 35.498 23.8984 30.7861 23.2422C25.9961 22.5762 25.9961 22.2373 25.9961 21.4951C25.9961 20.9609 25.9961 19.71 29.459 19.71C31.9228 19.71 33.2422 20.0215 33.6641 21.6631C33.7014 21.8451 33.7998 22.0089 33.943 22.1273C34.0861 22.2458 34.2654 22.3118 34.4512 22.3145H36.3916C36.506 22.3133 36.6188 22.2878 36.7225 22.2397C36.8262 22.1915 36.9185 22.1218 36.9932 22.0352C37.1423 21.861 37.2168 21.635 37.2002 21.4062C36.9492 17.9346 34.4111 16.1738 29.4619 16.1738C24.9639 16.1738 22.2793 18.2002 22.2793 21.5938C22.2793 25.3145 25.0615 26.3662 29.2412 26.8018C34.124 27.3066 34.124 28.043 34.124 28.6934C34.1269 29.707 33.706 31.0596 30.0664 31.0596Z" fill="#41883F"/>
</svg>
  ),
  
};
